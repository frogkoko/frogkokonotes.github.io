<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Korean Flashcards with TTS</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Noto+Serif+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            min-height: 100vh;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .header {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
            width: 100%;
            max-width: 800px;
        }

        .header h1 {
            font-size: 2.8rem;
            font-weight: 600;
            margin-bottom: 10px;
            color: #3498db;
        }

        .header p {
            font-size: 1.1rem;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        .back-button {
            background: #3498db;
            color: white;
            padding: 12px 24px;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
        }

        .back-button:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .main-container {
            width: 100%;
            max-width: 800px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        /* Status indicator */
        .status {
            text-align: center;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-weight: 500;
            width: 100%;
            max-width: 600px;
        }

        .status.processing {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .status.playing {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .status.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .status.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .tts-info {
            text-align: center;
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 30px;
            font-style: italic;
            width: 100%;
            max-width: 600px;
        }

        /* Flashcard Section Styles */
        .flashcard-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
            border: 1px solid #f0f0f0;
            width: 100%;
            max-width: 800px;
        }

        .flashcard-container {
            width: 100%;
        }

        .flashcard {
            background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            border-radius: 15px;
            padding: 40px;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 3px solid #3498db;
            position: relative;
            overflow: hidden;
        }

        .flashcard:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
        }

        .flashcard.flipped {
            border-color: #2ecc71;
        }

        .flashcard-front, .flashcard-back {
            display: none;
            text-align: center;
            width: 100%;
        }

        .flashcard-front.active, .flashcard-back.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .flashcard-korean {
            font-size: 3rem;
            font-family: 'Noto Serif KR', serif;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }

        .flashcard-korean:hover {
            color: #e74c3c;
            transform: scale(1.05);
        }

        .flashcard-english {
            font-size: 2.5rem;
            color: #3498db;
            margin-bottom: 15px;
            font-weight: 600;
        }

        .flashcard-romanized {
            font-size: 1.2rem;
            color: #7f8c8d;
            font-style: italic;
            margin-bottom: 20px;
        }

        .flashcard-details {
            font-size: 1rem;
            color: #5d6d7e;
            margin-top: 15px;
            line-height: 1.5;
        }

        .flashcard-instruction {
            text-align: center;
            color: #7f8c8d;
            margin-top: 15px;
            font-size: 0.9rem;
        }

        .flashcard-controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .flashcard-nav {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }

        .flashcard-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
        }

        .flashcard-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }

        .flashcard-button:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .flashcard-button.speech {
            background: #9b59b6;
        }

        .flashcard-button.speech:hover {
            background: #8e44ad;
        }

        .flashcard-button.flip {
            background: #2ecc71;
        }

        .flashcard-button.flip:hover {
            background: #27ae60;
        }

        .flashcard-button.prev {
            background: #f39c12;
        }

        .flashcard-button.prev:hover {
            background: #d68910;
        }

        .flashcard-button.next {
            background: #e74c3c;
        }

        .flashcard-button.next:hover {
            background: #c0392b;
        }

        .flashcard-button.settings {
            background: #7f8c8d;
        }

        .flashcard-button.settings:hover {
            background: #5d6d7e;
        }

        .flashcard-counter {
            text-align: center;
            color: #7f8c8d;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .flashcard-mode-toggle {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            flex-wrap: wrap;
        }

        .mode-option {
            background: white;
            border: 2px solid #ddd;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #7f8c8d;
        }

        .mode-option.active {
            background: #3498db;
            color: white;
            border-color: #3498db;
        }

        .mode-option:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .flashcard-settings {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .flashcard-settings.active {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            flex-wrap: wrap;
            gap: 10px;
        }

        .setting-label {
            font-weight: 600;
            color: #2c3e50;
            min-width: 150px;
        }

        .setting-control {
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid #ddd;
            background: white;
            font-family: 'Poppins', sans-serif;
            min-width: 200px;
        }

        /* Category Tags */
        .category-tags {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .category-tag {
            background: white;
            border: 2px solid #3498db;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            color: #3498db;
        }

        .category-tag:hover {
            background: #3498db;
            color: white;
            transform: translateY(-2px);
        }

        .category-tag.active {
            background: #3498db;
            color: white;
        }

        /* TTS Settings */
        .tts-settings {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .voice-selector {
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid #ddd;
            background: white;
            color: #333;
            font-family: 'Poppins', sans-serif;
            min-width: 200px;
        }

        .tts-test-button {
            background: #9b59b6;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .tts-test-button:hover {
            background: #8e44ad;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.2rem;
            }

            .flashcard {
                padding: 20px;
                min-height: 250px;
            }

            .flashcard-korean {
                font-size: 2.2rem;
            }

            .flashcard-english {
                font-size: 1.8rem;
            }

            .flashcard-controls {
                flex-direction: column;
            }

            .flashcard-button {
                width: 100%;
                justify-content: center;
            }

            .flashcard-nav {
                width: 100%;
            }

            .setting-row {
                flex-direction: column;
                align-items: flex-start;
            }

            .setting-control {
                width: 100%;
            }
        }

        @media (max-width: 576px) {
            .header h1 {
                font-size: 2rem;
            }

            .flashcard-korean {
                font-size: 1.8rem;
            }

            .flashcard-english {
                font-size: 1.5rem;
            }

            .flashcard-romanized {
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <div class="header">
            <a href="../../index.html" class="back-button">‚Üê Back to Main</a>
            <h1>Korean Flashcards with TTS</h1>
            <p>Learn essential Korean phrases, words, and numbers with text-to-speech pronunciation</p>
            <p>Click on Korean text to hear pronunciation</p>
        </div>

        <div id="status" class="status success">Ready for text-to-speech</div>
        <p class="tts-info">Click on any Korean text to hear its pronunciation</p>

        <div class="tts-settings" id="tts-settings">
            <span class="setting-label">TTS Voice:</span>
            <select class="voice-selector" id="voice-selector">
                <option value="">Loading voices...</option>
            </select>
            <button class="tts-test-button" id="test-tts-button">
                üîä Test TTS
            </button>
        </div>

        <div class="category-tags" id="category-tags">
            <div class="category-tag active" data-category="all">All Cards</div>
            <div class="category-tag" data-category="greetings">Greetings</div>
            <div class="category-tag" data-category="polite">Polite Phrases</div>
            <div class="category-tag" data-category="introduction">Introduction</div>
            <div class="category-tag" data-category="basic">Basic Words</div>
            <div class="category-tag" data-category="numbers">Numbers</div>
            <div class="category-tag" data-category="large-numbers">Large Numbers</div>
        </div>

        <div class="flashcard-section">
            <div class="flashcard-mode-toggle">
                <div class="mode-option active" data-mode="english-first">English First</div>
                <div class="mode-option" data-mode="korean-first">Korean First</div>
                <div class="mode-option" data-mode="romanized-first">Romanized First</div>
            </div>
            
            <div class="flashcard-container">
                <div class="flashcard" id="current-flashcard">
                    <div class="flashcard-front active">
                        <div class="flashcard-english" id="flashcard-english">Hello (formal)</div>
                        <div class="flashcard-instruction">Click to reveal Korean</div>
                    </div>
                    <div class="flashcard-back">
                        <div class="flashcard-korean" id="flashcard-korean">ÏïàÎÖïÌïòÏÑ∏Ïöî</div>
                        <div class="flashcard-romanized" id="flashcard-romanized">annyeonghaseyo</div>
                        <div class="flashcard-details" id="flashcard-details">Most common formal greeting</div>
                        <div class="flashcard-instruction">Click to go back</div>
                    </div>
                </div>
                
                <div class="flashcard-counter" id="flashcard-counter">Card 1 of 50</div>
                
                <div class="flashcard-controls">
                    <button class="flashcard-button speech" id="speak-button">
                        üîä Speak Korean
                    </button>
                    <button class="flashcard-button flip" id="flip-button">
                        üîÑ Flip Card
                    </button>
                    <button class="flashcard-button settings" id="settings-button">
                        ‚öôÔ∏è Settings
                    </button>
                </div>
                
                <div class="flashcard-nav">
                    <button class="flashcard-button prev" id="prev-button">
                        ‚Üê Previous
                    </button>
                    <button class="flashcard-button next" id="next-button">
                        Next ‚Üí
                    </button>
                </div>
            </div>
            
            <div class="flashcard-settings" id="flashcard-settings">
                <div class="setting-row">
                    <span class="setting-label">Flashcard Set:</span>
                    <select class="setting-control" id="flashcard-set-selector">
                        <option value="all">All Cards (50 cards)</option>
                        <option value="greetings">Greetings (8 cards)</option>
                        <option value="polite">Polite Phrases (10 cards)</option>
                        <option value="introduction">Introduction (6 cards)</option>
                        <option value="basic">Basic Words (8 cards)</option>
                        <option value="numbers">Numbers 1-100 (18 cards)</option>
                    </select>
                </div>
                <div class="setting-row">
                    <span class="setting-label">Auto-play Speech:</span>
                    <select class="setting-control" id="auto-speak-selector">
                        <option value="on-flip">On Flip</option>
                        <option value="on-both">Always</option>
                        <option value="off">Off</option>
                    </select>
                </div>
                <div class="setting-row">
                    <span class="setting-label">Shuffle Cards:</span>
                    <button class="flashcard-button" id="shuffle-button" style="background: #9b59b6; padding: 8px 15px;">
                        üîÄ Shuffle Now
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Korean flashcards data
        const koreanFlashcards = {
            greetings: [
                { 
                    korean: 'ÏïàÎÖïÌïòÏÑ∏Ïöî', 
                    romanized: 'annyeonghaseyo', 
                    english: 'Hello (formal)',
                    details: 'Most common formal greeting'
                },
                { 
                    korean: 'ÏïàÎÖï', 
                    romanized: 'annyeong', 
                    english: 'Hello (informal)',
                    details: 'Casual greeting for friends'
                },
                { 
                    korean: 'ÏïàÎÖïÌûà Í∞ÄÏÑ∏Ïöî', 
                    romanized: 'annyeonghi gaseyo', 
                    english: 'Goodbye (to someone leaving)',
                    details: 'Said to the person who is leaving'
                },
                { 
                    korean: 'ÏïàÎÖïÌûà Í≥ÑÏÑ∏Ïöî', 
                    romanized: 'annyeonghi gyeseyo', 
                    english: 'Goodbye (to someone staying)',
                    details: 'Said when you are leaving'
                },
                { 
                    korean: 'Ï¢ãÏùÄ ÏïÑÏπ®', 
                    romanized: 'joheun achim', 
                    english: 'Good morning',
                    details: 'Morning greeting'
                },
                { 
                    korean: 'ÏïàÎÖïÌûà Ï£ºÎ¨¥ÏÑ∏Ïöî', 
                    romanized: 'annyeonghi jumuseyo', 
                    english: 'Good night',
                    details: 'Polite bedtime greeting'
                },
                { 
                    korean: 'ÎßåÎÇòÏÑú Î∞òÍ∞ëÏäµÎãàÎã§', 
                    romanized: 'mannaseo bangapseumnida', 
                    english: 'Nice to meet you (formal)',
                    details: 'Used when meeting someone for the first time'
                },
                { 
                    korean: 'ÎßåÎÇòÏÑú Î∞òÍ∞ÄÏõå', 
                    romanized: 'mannaseo bangawo', 
                    english: 'Nice to meet you (informal)',
                    details: 'Casual way to say nice to meet you'
                }
            ],
            polite: [
                { 
                    korean: 'Í∞êÏÇ¨Ìï©ÎãàÎã§', 
                    romanized: 'gamsahamnida', 
                    english: 'Thank you (formal)',
                    details: 'Most common way to say thank you'
                },
                { 
                    korean: 'Í≥†ÎßôÏäµÎãàÎã§', 
                    romanized: 'gomapseumnida', 
                    english: 'Thank you (polite)',
                    details: 'Another polite way to say thank you'
                },
                { 
                    korean: 'Í≥†ÎßàÏõå', 
                    romanized: 'gomawo', 
                    english: 'Thank you (informal)',
                    details: 'Casual thank you for friends'
                },
                { 
                    korean: 'Ï≤úÎßåÏóêÏöî', 
                    romanized: 'cheonmaneyo', 
                    english: 'You\'re welcome',
                    details: 'Direct response to thank you'
                },
                { 
                    korean: 'ÏïÑÎãàÏóêÏöî', 
                    romanized: 'anieyo', 
                    english: 'No problem / You\'re welcome',
                    details: 'Common response to thank you'
                },
                { 
                    korean: 'Í¥úÏ∞ÆÏïÑÏöî', 
                    romanized: 'gwaenchanayo', 
                    english: 'It\'s okay / No problem',
                    details: 'Versatile phrase meaning "it\'s okay"'
                },
                { 
                    korean: 'Ïã§Î°ÄÌï©ÎãàÎã§', 
                    romanized: 'sillyehamnida', 
                    english: 'Excuse me (polite)',
                    details: 'Used when interrupting or passing through'
                },
                { 
                    korean: 'Ï£ÑÏÜ°Ìï©ÎãàÎã§', 
                    romanized: 'joesonghamnida', 
                    english: 'I\'m sorry (formal)',
                    details: 'Formal apology'
                },
                { 
                    korean: 'ÎØ∏ÏïàÌï¥Ïöî', 
                    romanized: 'mianhaeyo', 
                    english: 'I\'m sorry (polite)',
                    details: 'Polite apology'
                },
                { 
                    korean: 'ÎØ∏ÏïàÌï¥', 
                    romanized: 'mianhae', 
                    english: 'I\'m sorry (informal)',
                    details: 'Casual apology for friends'
                }
            ],
            introduction: [
                { 
                    korean: 'Ï†ú Ïù¥Î¶ÑÏùÄ [Ïù¥Î¶Ñ]ÏûÖÎãàÎã§', 
                    romanized: 'je ireumeun [ireum]imnida', 
                    english: 'My name is [name]',
                    details: 'Formal self-introduction'
                },
                { 
                    korean: 'Ï†ÄÎäî [Ïù¥Î¶Ñ]Ïù¥ÎùºÍ≥† Ìï©ÎãàÎã§', 
                    romanized: 'jeoneun [ireum]irago hamnida', 
                    english: 'I\'m called [name]',
                    details: 'Polite way to introduce yourself'
                },
                { 
                    korean: 'ÎÇòÎäî [Ïù¥Î¶Ñ]Ïù¥Ïïº', 
                    romanized: 'naneun [ireum]iya', 
                    english: 'I\'m [name] (informal)',
                    details: 'Casual self-introduction'
                },
                { 
                    korean: 'Ïù¥Î¶ÑÏù¥ Î≠êÏòàÏöî?', 
                    romanized: 'ireumi mwoyeyo?', 
                    english: 'What\'s your name? (formal)',
                    details: 'Most common way to ask someone\'s name'
                },
                { 
                    korean: 'Ïù¥Î¶ÑÏù¥ Î≠êÏïº?', 
                    romanized: 'ireumi mwoya?', 
                    english: 'What\'s your name? (informal)',
                    details: 'Casual way to ask someone\'s name'
                },
                { 
                    korean: 'ÏÑ±Ìï®Ïù¥ Ïñ¥ÎñªÍ≤å ÎêòÏÑ∏Ïöî?', 
                    romanized: 'seonghami eotteoke doeseyo?', 
                    english: 'What\'s your name? (very polite)',
                    details: 'Extremely polite way to ask someone\'s name'
                }
            ],
            basic: [
                { 
                    korean: 'ÎÑ§', 
                    romanized: 'ne', 
                    english: 'Yes',
                    details: 'Standard way to say yes'
                },
                { 
                    korean: 'Ïòà', 
                    romanized: 'ye', 
                    english: 'Yes (more formal)',
                    details: 'More formal way to say yes'
                },
                { 
                    korean: 'ÏïÑÎãàÏöî', 
                    romanized: 'aniyo', 
                    english: 'No (formal)',
                    details: 'Polite way to say no'
                },
                { 
                    korean: 'ÏïÑÎãà', 
                    romanized: 'ani', 
                    english: 'No (informal)',
                    details: 'Casual way to say no'
                },
                { 
                    korean: 'Ï¢ãÏïÑÏöî', 
                    romanized: 'joayo', 
                    english: 'Good / Okay',
                    details: 'Expressing that something is good'
                },
                { 
                    korean: 'Ïã´Ïñ¥Ïöî', 
                    romanized: 'sireoyo', 
                    english: 'I don\'t like it',
                    details: 'Expressing dislike'
                },
                { 
                    korean: 'ÏïåÍ≤†ÏäµÎãàÎã§', 
                    romanized: 'algesseumnida', 
                    english: 'I understand',
                    details: 'Formal way to say you understand'
                },
                { 
                    korean: 'Î™®Î•¥Í≤†Ïñ¥Ïöî', 
                    romanized: 'moreugesseoyo', 
                    english: 'I don\'t know',
                    details: 'Polite way to say you don\'t know'
                }
            ],
            numbers: [
                { 
                    korean: 'ÌïòÎÇò', 
                    romanized: 'hana', 
                    english: 'One (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'Îëò', 
                    romanized: 'dul', 
                    english: 'Two (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'ÏÖã', 
                    romanized: 'set', 
                    english: 'Three (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'ÎÑ∑', 
                    romanized: 'net', 
                    english: 'Four (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'Îã§ÏÑØ', 
                    romanized: 'daseot', 
                    english: 'Five (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'Ïó¨ÏÑØ', 
                    romanized: 'yeoseot', 
                    english: 'Six (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'ÏùºÍ≥±', 
                    romanized: 'ilgop', 
                    english: 'Seven (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'Ïó¨Îçü', 
                    romanized: 'yeodeol', 
                    english: 'Eight (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'ÏïÑÌôâ', 
                    romanized: 'ahop', 
                    english: 'Nine (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'Ïó¥', 
                    romanized: 'yeol', 
                    english: 'Ten (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'Ïä§Î¨º', 
                    romanized: 'seumul', 
                    english: 'Twenty (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'ÏÑúÎ•∏', 
                    romanized: 'seoreun', 
                    english: 'Thirty (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'ÎßàÌùî', 
                    romanized: 'maheun', 
                    english: 'Forty (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'Ïâ∞', 
                    romanized: 'swin', 
                    english: 'Fifty (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'ÏòàÏàú', 
                    romanized: 'yesun', 
                    english: 'Sixty (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'ÏùºÌùî', 
                    romanized: 'ilheun', 
                    english: 'Seventy (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'Ïó¨Îì†', 
                    romanized: 'yeodeun', 
                    english: 'Eighty (native Korean)',
                    details: 'Native Korean number'
                },
                { 
                    korean: 'ÏïÑÌùî', 
                    romanized: 'aheun', 
                    english: 'Ninety (native Korean)',
                    details: 'Native Korean number'
                }
            ],
            'large-numbers': [
                { 
                    korean: 'Ïùº', 
                    romanized: 'il', 
                    english: 'One (Sino-Korean)',
                    details: 'Sino-Korean number - used for dates, money, phone numbers'
                },
                { 
                    korean: 'Ïù¥', 
                    romanized: 'i', 
                    english: 'Two (Sino-Korean)',
                    details: 'Sino-Korean number'
                },
                { 
                    korean: 'ÏÇº', 
                    romanized: 'sam', 
                    english: 'Three (Sino-Korean)',
                    details: 'Sino-Korean number'
                },
                { 
                    korean: 'ÏÇ¨', 
                    romanized: 'sa', 
                    english: 'Four (Sino-Korean)',
                    details: 'Sino-Korean number'
                },
                { 
                    korean: 'Ïò§', 
                    romanized: 'o', 
                    english: 'Five (Sino-Korean)',
                    details: 'Sino-Korean number'
                },
                { 
                    korean: 'Ïú°', 
                    romanized: 'yuk', 
                    english: 'Six (Sino-Korean)',
                    details: 'Sino-Korean number'
                },
                { 
                    korean: 'Ïπ†', 
                    romanized: 'chil', 
                    english: 'Seven (Sino-Korean)',
                    details: 'Sino-Korean number'
                },
                { 
                    korean: 'Ìåî', 
                    romanized: 'pal', 
                    english: 'Eight (Sino-Korean)',
                    details: 'Sino-Korean number'
                },
                { 
                    korean: 'Íµ¨', 
                    romanized: 'gu', 
                    english: 'Nine (Sino-Korean)',
                    details: 'Sino-Korean number'
                },
                { 
                    korean: 'Ïã≠', 
                    romanized: 'sip', 
                    english: 'Ten (Sino-Korean)',
                    details: 'Sino-Korean number'
                },
                { 
                    korean: 'Î∞±', 
                    romanized: 'baek', 
                    english: 'One Hundred',
                    details: 'Sino-Korean number'
                },
                { 
                    korean: 'Ï≤ú', 
                    romanized: 'cheon', 
                    english: 'One Thousand',
                    details: 'Sino-Korean number'
                },
                { 
                    korean: 'Îßå', 
                    romanized: 'man', 
                    english: 'Ten Thousand',
                    details: 'Sino-Korean number'
                },
                { 
                    korean: 'Ïù¥Ï≤ú', 
                    romanized: 'icheon', 
                    english: 'Two Thousand',
                    details: '2,000 in Sino-Korean'
                },
                { 
                    korean: 'ÏÇºÏ≤ú', 
                    romanized: 'samcheon', 
                    english: 'Three Thousand',
                    details: '3,000 in Sino-Korean'
                },
                { 
                    korean: 'ÏÇ¨Ï≤ú', 
                    romanized: 'sacheon', 
                    english: 'Four Thousand',
                    details: '4,000 in Sino-Korean'
                },
                { 
                    korean: 'Îßå Ïù¥Ï≤ú', 
                    romanized: 'man icheon', 
                    english: 'Twelve Thousand (10,000 + 2,000)',
                    details: '12,000 in Sino-Korean'
                },
                { 
                    korean: 'Ïù¥Îßå', 
                    romanized: 'iman', 
                    english: 'Twenty Thousand',
                    details: '20,000 in Sino-Korean'
                },
                { 
                    korean: 'Ïã≠Îßå', 
                    romanized: 'simman', 
                    english: 'One Hundred Thousand',
                    details: '100,000 in Sino-Korean'
                },
                { 
                    korean: 'Î∞±Îßå', 
                    romanized: 'baengman', 
                    english: 'One Million',
                    details: '1,000,000 in Sino-Korean'
                }
            ]
        };

        // Text-to-Speech System
        class TTSSystem {
            constructor() {
                this.speechSynthesis = window.speechSynthesis;
                this.voices = [];
                this.selectedVoice = null;
                this.isSpeaking = false;
                this.isPaused = false;
                
                this.initializeVoices();
                this.bindEvents();
            }
            
            initializeVoices() {
                // Load available voices
                this.loadVoices();
                
                // Some browsers load voices asynchronously
                if (this.speechSynthesis.onvoiceschanged !== undefined) {
                    this.speechSynthesis.onvoiceschanged = () => this.loadVoices();
                }
            }
            
            loadVoices() {
                this.voices = this.speechSynthesis.getVoices();
                this.populateVoiceSelector();
            }
            
            populateVoiceSelector() {
                const voiceSelector = document.getElementById('voice-selector');
                voiceSelector.innerHTML = '<option value="">Select a voice...</option>';
                
                // Filter for Korean voices first
                const koreanVoices = this.voices.filter(voice => voice.lang.includes('ko'));
                const otherVoices = this.voices.filter(voice => !voice.lang.includes('ko'));
                
                if (koreanVoices.length > 0) {
                    const group = document.createElement('optgroup');
                    group.label = 'Korean Voices';
                    koreanVoices.forEach(voice => {
                        const option = document.createElement('option');
                        option.value = voice.name;
                        option.textContent = `${voice.name} (${voice.lang})`;
                        group.appendChild(option);
                    });
                    voiceSelector.appendChild(group);
                }
                
                if (otherVoices.length > 0) {
                    const group = document.createElement('optgroup');
                    group.label = 'Other Voices';
                    otherVoices.forEach(voice => {
                        const option = document.createElement('option');
                        option.value = voice.name;
                        option.textContent = `${voice.name} (${voice.lang})`;
                        group.appendChild(option);
                    });
                    voiceSelector.appendChild(group);
                }
                
                // Auto-select Korean voice if available
                if (koreanVoices.length > 0) {
                    voiceSelector.value = koreanVoices[0].name;
                    this.selectedVoice = koreanVoices[0];
                }
            }
            
            bindEvents() {
                const voiceSelector = document.getElementById('voice-selector');
                const testButton = document.getElementById('test-tts-button');
                
                voiceSelector.addEventListener('change', (e) => {
                    const voiceName = e.target.value;
                    this.selectedVoice = this.voices.find(voice => voice.name === voiceName);
                });
                
                testButton.addEventListener('click', () => {
                    this.speakText('ÏïàÎÖïÌïòÏÑ∏Ïöî');
                });
            }
            
            async speakText(text) {
                return new Promise((resolve, reject) => {
                    // Stop any current speech
                    this.stopSpeaking();
                    
                    if (!this.speechSynthesis) {
                        updateStatus('Speech synthesis not supported', 'error');
                        reject(new Error('Speech synthesis not supported'));
                        return;
                    }
                    
                    if (!text || text.trim() === '') {
                        updateStatus('No text to speak', 'error');
                        reject(new Error('No text to speak'));
                        return;
                    }
                    
                    // Clean the text
                    const cleanText = text.replace(/\[.*?\]/g, '').trim();
                    
                    updateStatus('Preparing to speak...', 'processing');
                    
                    const utterance = new SpeechSynthesisUtterance(cleanText);
                    
                    // Set language to Korean
                    utterance.lang = 'ko-KR';
                    
                    // Set voice if selected
                    if (this.selectedVoice) {
                        utterance.voice = this.selectedVoice;
                    } else {
                        // Try to find a Korean voice
                        const koreanVoice = this.voices.find(voice => voice.lang.includes('ko'));
                        if (koreanVoice) {
                            utterance.voice = koreanVoice;
                        }
                    }
                    
                    // Set speech parameters
                    utterance.rate = 0.8; // Slightly slower for language learning
                    utterance.pitch = 1;
                    utterance.volume = 1;
                    
                    // Event handlers
                    utterance.onstart = () => {
                        this.isSpeaking = true;
                        updateStatus('Speaking Korean...', 'playing');
                    };
                    
                    utterance.onend = () => {
                        this.isSpeaking = false;
                        updateStatus('Ready for text-to-speech', 'success');
                        resolve();
                    };
                    
                    utterance.onerror = (event) => {
                        this.isSpeaking = false;
                        updateStatus('Error speaking text', 'error');
                        console.error('Speech error:', event);
                        reject(event.error);
                    };
                    
                    // Speak the text
                    this.speechSynthesis.speak(utterance);
                });
            }
            
            stopSpeaking() {
                if (this.speechSynthesis && this.isSpeaking) {
                    this.speechSynthesis.cancel();
                    this.isSpeaking = false;
                    updateStatus('Speech stopped', '');
                }
            }
            
            pauseSpeaking() {
                if (this.speechSynthesis && this.isSpeaking && !this.isPaused) {
                    this.speechSynthesis.pause();
                    this.isPaused = true;
                    updateStatus('Speech paused', '');
                }
            }
            
            resumeSpeaking() {
                if (this.speechSynthesis && this.isPaused) {
                    this.speechSynthesis.resume();
                    this.isPaused = false;
                    updateStatus('Resuming speech...', 'playing');
                }
            }
        }

        // Flashcard System
        class FlashcardSystem {
            constructor(ttsSystem) {
                this.currentIndex = 0;
                this.isFlipped = false;
                this.mode = 'english-first';
                this.currentSet = 'all';
                this.currentCategory = 'all';
                this.cards = this.getAllCards();
                this.isShuffled = false;
                this.autoSpeak = 'on-flip';
                this.ttsSystem = ttsSystem;
                
                this.initializeElements();
                this.bindEvents();
                this.displayCurrentCard();
            }
            
            getAllCards() {
                const allCards = [];
                
                Object.keys(koreanFlashcards).forEach(section => {
                    koreanFlashcards[section].forEach(card => {
                        allCards.push({
                            ...card,
                            category: section
                        });
                    });
                });
                
                return allCards;
            }
            
            getFilteredCards() {
                let filtered = [];
                
                if (this.currentCategory === 'all') {
                    if (this.currentSet === 'all') {
                        filtered = this.cards;
                    } else {
                        filtered = this.cards.filter(card => card.category === this.currentSet);
                    }
                } else {
                    filtered = this.cards.filter(card => card.category === this.currentCategory);
                }
                
                return this.isShuffled ? this.shuffleArray([...filtered]) : [...filtered];
            }
            
            shuffleArray(array) {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            }
            
            initializeElements() {
                this.flashcardElement = document.getElementById('current-flashcard');
                this.englishElement = document.getElementById('flashcard-english');
                this.koreanElement = document.getElementById('flashcard-korean');
                this.romanizedElement = document.getElementById('flashcard-romanized');
                this.detailsElement = document.getElementById('flashcard-details');
                this.counterElement = document.getElementById('flashcard-counter');
                this.settingsElement = document.getElementById('flashcard-settings');
                
                this.speakButton = document.getElementById('speak-button');
                this.flipButton = document.getElementById('flip-button');
                this.prevButton = document.getElementById('prev-button');
                this.nextButton = document.getElementById('next-button');
                this.settingsButton = document.getElementById('settings-button');
                this.shuffleButton = document.getElementById('shuffle-button');
                
                this.setSelector = document.getElementById('flashcard-set-selector');
                this.autoSpeakSelector = document.getElementById('auto-speak-selector');
                this.modeOptions = document.querySelectorAll('.mode-option');
                this.categoryTags = document.querySelectorAll('.category-tag');
            }
            
            bindEvents() {
                // Flashcard click to flip
                this.flashcardElement.addEventListener('click', () => this.flipCard());
                
                // Korean text click for TTS
                this.koreanElement.addEventListener('click', () => this.speakCurrentCard());
                
                // Button events
                this.speakButton.addEventListener('click', () => this.speakCurrentCard());
                this.flipButton.addEventListener('click', () => this.flipCard());
                this.prevButton.addEventListener('click', () => this.previousCard());
                this.nextButton.addEventListener('click', () => this.nextCard());
                this.settingsButton.addEventListener('click', () => this.toggleSettings());
                this.shuffleButton.addEventListener('click', () => this.shuffleCards());
                
                // Settings events
                this.setSelector.addEventListener('change', (e) => this.changeSet(e.target.value));
                this.autoSpeakSelector.addEventListener('change', (e) => this.changeAutoSpeak(e.target.value));
                
                // Mode toggle events
                this.modeOptions.forEach(option => {
                    option.addEventListener('click', (e) => this.changeMode(e.target.dataset.mode));
                });
                
                // Category tag events
                this.categoryTags.forEach(tag => {
                    tag.addEventListener('click', (e) => this.changeCategory(e.target.dataset.category));
                });
            }
            
            changeMode(newMode) {
                this.mode = newMode;
                this.modeOptions.forEach(option => {
                    option.classList.toggle('active', option.dataset.mode === newMode);
                });
                this.displayCurrentCard();
            }
            
            changeCategory(category) {
                this.currentCategory = category;
                this.currentIndex = 0;
                this.isFlipped = false;
                
                // Update active category tag
                this.categoryTags.forEach(tag => {
                    tag.classList.toggle('active', tag.dataset.category === category);
                });
                
                // Update set selector if needed
                if (category !== 'all') {
                    this.setSelector.value = category;
                    this.currentSet = category;
                }
                
                this.displayCurrentCard();
            }
            
            changeSet(setName) {
                this.currentSet = setName;
                this.currentIndex = 0;
                this.isFlipped = false;
                this.displayCurrentCard();
            }
            
            changeAutoSpeak(setting) {
                this.autoSpeak = setting;
            }
            
            shuffleCards() {
                this.isShuffled = true;
                this.currentIndex = 0;
                this.isFlipped = false;
                this.displayCurrentCard();
                
                // Visual feedback for shuffle
                this.shuffleButton.textContent = '‚úì Shuffled!';
                setTimeout(() => {
                    this.shuffleButton.textContent = 'üîÄ Shuffle Now';
                }, 1000);
            }
            
            toggleSettings() {
                this.settingsElement.classList.toggle('active');
            }
            
            getCurrentCard() {
                const filteredCards = this.getFilteredCards();
                return filteredCards[this.currentIndex];
            }
            
            displayCurrentCard() {
                const card = this.getCurrentCard();
                if (!card) return;
                
                const filteredCards = this.getFilteredCards();
                const total = filteredCards.length;
                
                // Update counter
                this.counterElement.textContent = `Card ${this.currentIndex + 1} of ${total}`;
                
                // Reset flip state
                this.isFlipped = false;
                this.flashcardElement.classList.remove('flipped');
                
                // Set content based on mode
                if (this.mode === 'english-first') {
                    this.englishElement.textContent = card.english;
                    this.koreanElement.textContent = card.korean;
                    this.romanizedElement.textContent = card.romanized;
                    this.detailsElement.textContent = card.details;
                    
                    document.querySelector('.flashcard-front').classList.add('active');
                    document.querySelector('.flashcard-back').classList.remove('active');
                } else if (this.mode === 'korean-first') {
                    this.englishElement.textContent = card.english;
                    this.koreanElement.textContent = card.korean;
                    this.romanizedElement.textContent = card.romanized;
                    this.detailsElement.textContent = card.details;
                    
                    // Show Korean first
                    document.querySelector('.flashcard-front').classList.remove('active');
                    document.querySelector('.flashcard-back').classList.add('active');
                    this.flashcardElement.classList.add('flipped');
                    this.isFlipped = true;
                } else if (this.mode === 'romanized-first') {
                    this.englishElement.textContent = card.romanized;
                    this.koreanElement.textContent = card.korean;
                    this.romanizedElement.textContent = card.english;
                    this.detailsElement.textContent = card.details;
                    
                    document.querySelector('.flashcard-front').classList.add('active');
                    document.querySelector('.flashcard-back').classList.remove('active');
                }
                
                // Auto-speak if enabled
                if (this.autoSpeak === 'on-both' || 
                    (this.autoSpeak === 'on-flip' && this.isFlipped)) {
                    setTimeout(() => this.speakCurrentCard(), 300);
                }
            }
            
            flipCard() {
                this.isFlipped = !this.isFlipped;
                this.flashcardElement.classList.toggle('flipped');
                
                document.querySelector('.flashcard-front').classList.toggle('active');
                document.querySelector('.flashcard-back').classList.toggle('active');
                
                // Auto-speak if enabled
                if (this.autoSpeak === 'on-flip') {
                    setTimeout(() => this.speakCurrentCard(), 300);
                }
            }
            
            async speakCurrentCard() {
                const card = this.getCurrentCard();
                if (card && this.ttsSystem) {
                    await this.ttsSystem.speakText(card.korean);
                }
            }
            
            nextCard() {
                const filteredCards = this.getFilteredCards();
                this.currentIndex = (this.currentIndex + 1) % filteredCards.length;
                this.isFlipped = false;
                this.displayCurrentCard();
            }
            
            previousCard() {
                const filteredCards = this.getFilteredCards();
                this.currentIndex = (this.currentIndex - 1 + filteredCards.length) % filteredCards.length;
                this.isFlipped = false;
                this.displayCurrentCard();
            }
        }

        let flashcardSystem;
        let ttsSystem;

        // Update status display
        function updateStatus(message, type) {
            const statusDiv = document.getElementById('status');
            statusDiv.textContent = message;
            statusDiv.className = 'status';
            if (type) {
                statusDiv.classList.add(type);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            // Check for speech synthesis support
            if (!('speechSynthesis' in window)) {
                updateStatus('Text-to-speech not supported in your browser. Please use Chrome, Edge, or Safari.', 'error');
                document.getElementById('speak-button').disabled = true;
                document.getElementById('test-tts-button').disabled = true;
                document.querySelectorAll('.flashcard-korean').forEach(el => {
                    el.style.cursor = 'default';
                    el.style.color = '#95a5a6';
                    el.onclick = null;
                });
                return;
            }
            
            // Initialize TTS system
            ttsSystem = new TTSSystem();
            
            // Initialize flashcard system with TTS
            flashcardSystem = new FlashcardSystem(ttsSystem);
            
            updateStatus('Text-to-speech ready! Click on Korean text to hear pronunciation.', 'success');
        });
    </script>
</body>
</html>